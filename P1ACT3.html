<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>P1 Actividad 1</title>
     <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
</head>
<body>
    <header>
               <!--Barra de navegacion-->
        <nav class="navbar navbar-expand-lg bg-body-tertiary" id="menu">
  <div class="container-fluid">
    <a class="navbar-brand" href="index.html">Inicio     </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Parcial 1
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="P1ACT1.html">Actividad 1</a></li>
            <li><a class="dropdown-item" href="P1ACT2.html">Actividad 2</a></li>
            <li><a class="dropdown-item" href="P1ACT3.html">Actividad 3</a></li>
            <li><a class="dropdown-item" href="P1ACT4.html">Actividad 4</a></li>
            <li><a class="dropdown-item" href="P1ACT5.html">Actividad 5</a></li>
            <li><a class="dropdown-item" href="P1ACT6.html">Actividad 6</a></li>
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Parcial 2
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#">Actividad 1</a></li>      
          </ul>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            Parcial 3
          </a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#">Actividad 1</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>

 <div class="titulos_1">
            <br>
            <h2>Parcial 1</h2>
            <h3>Actividad 3</h3>
            <h4>Interpretación y traduccion de politicas de filtrado en iptables</h4>
        </div>
    </header>
    <section class="presentacion">

    </section>
        <br>
    <hr style="margin-left: 12.5%; margin-right: 12.5%;">
    <section class="presentacion">
         <br>
          <h4>Desarrollo de la actividad</h4> 
          <br>
          <h5 class="t_tareas">Contenido</h5>
          <br>
          <div class="list-group" style="width: 50%; margin-left: 25%;">
            <a href="#c1_t3p1"><button type="button" class="list-group-item list-group-item-action">Introduccion</button></a> 
            <a href="#c2_t3p1"><button type="button" class="list-group-item list-group-item-action">Desarrollo</button></a> 
            <a href="#c3_t3p1"><button type="button" class="list-group-item list-group-item-action">Conclusión</button></a> 
            <a href="#c4_31p1"><button type="button" class="list-group-item list-group-item-action">Descargar archivo PDF</button></a>
          </div>
          <br>
          <br>
          <h5 class="t_tareas" id="c1_t3p1">Introducción</h5>
          <br>
          <p style="text-align: justify;">
            En la administración de sistemas Linux, la seguridad y el control del tráfico de red son aspectos fundamentales.
             Iptables es la herramienta de firewall por excelencia que permite gestionar este control, actuando como un filtro 
             de paquetes que opera directamente en el núcleo del sistema. Su funcionamiento se basa en una estructura jerárquica 
             y organizada: cuando un paquete de red llega al sistema, este debe atravesar diferentes niveles de decisión.
          </p>
          <br><br>
          <h5 class="t_tareas" id="c2_t3p1">Desarrollo</h5>
          <br><br>
          <ol style="text-align: left;">
            <li>Completa los espacios conforme se explica <br>
              <p><br> Cuando un paquete llega al sistema,, primero pasa por una <u>tabla</u>
                después pasa por una <u>cadena</u> y finalmente se ejecuta una <u>regla/accion</u><br></p>
            </li>
            <li>Relaciona cada tabla con su propósito principal
              <table class="table table-bordered border-primary">
                <tbody>
                  <tr class="table-info">
                    <th colspan="1">Tabla</th>
                    <th colspan="3">Proposito principal</th>
                    <th colspan="3">Ejemplo de uso (01 palabra o frase corta)</th>
                  </tr>

                  <tr>
                    <th colspan="1">FILTER</th>
                    <th colspan="3">filtrado de paquetes</th>
                    <th colspan="3">bloquear conexiones SSA</th>
                  </tr>

                  <tr>
                    <th colspan="1">NAT</th>
                    <th colspan="3">traduccion de direcciones IP</th>
                    <th colspan="3">Port Forwarding</th>
                  </tr>
                  
                  <tr>
                    <th colspan="1">MANGLE</th>
                    <th colspan="3">medir calidad de servicio</th>
                    <th colspan="3">cambiar cabeceras</th>
                  </tr>

                  <tr>
                    <th colspan="1">RAW</th>
                    <th colspan="3">seguimiento de paquetes</th>
                    <th colspan="3">paquetes no isnpeccionados</th>
                  </tr>

                  <tr>
                    <th colspan="1">SECURITY</th>
                    <th colspan="3">marcar etiquetas de seguridad</th>
                    <th colspan="3">paquete autorizado o no autorizado</th>
                  </tr>
                </tbody>
              </table>
            </li>
            <br>
            <li>Anatomía de un comando iptables:
              <p>iptables -A <u>INPUT</u> -p tcp -m <u>multiport</u> --dports 80,443 -j <u>ACCEPT</u><br><br></p>
            </li>

            <li>Este comando permite
              <p style="text-align: justify;">
                Define la tabla, cadena, protocolo, el parametro multiport permite analizar varios 
                puertos y estamos analizando los puertos de origen 80 y 445 y los acepta.
              </p>
            </li>

            <li>variables y opciones comunes
              <ul>
                <li><b>Limitar intentos por minuto</b>
                  <p>--limit 5/minute</p>
                </li>

                <li><b>Filtrar por IP de origen</b>
                  <p>-s 182.168.25.0/24</p>
                </li>

                <li><b>Ver solo números, sin DNS (ni resolución de puertos)</b>
                  <p>-list -n</p>
                </li>

                <li><b>Ver reglas con contadores (paquetes y bytes)</b>
                <p>-L -V</p>
                </li>
              </ul>
            </li>

            <li>¿Que hace esta regla?
              <p style="text-align: justify;"><b>iptables -A INPUT -i eth0 -p tcp -m multiport --dports 22,80,443 \ 
                -m state --state NEW, ESTABLISHED -j  ACCEPT</b><br>
                <br>
                Permite el trafico TCP entrante por interfaz eth0 a los puertos 22,80 y 443 siempre que sea parte de una connexión nueva 
                o establecida
              </p>
            </li>

            <li><b>Permitir tráfico HTTP entrante </b>
              <p>iptables -A INPUT -p tcp --dports 80 -j ACCEPT</p>
            </li>

            <li><b>Permitir todo el tráfico saliente</b>
              <p>iptables -A OUTPPUT -j ACCEPT</p>
            </li>
            <li><b>Permitir SSH solo desde la IP 192.168.1.50</b>
              <p>iptables -A INPUT -p tcp -s 192.168.1.50 --dports 22 -j ACCEPT</p>
            </li>

            <li><b>Permitir tráfico TCP entrante a puertos 80 y 443 solo si es conexion establecida o relacionada</b>
              <p>iptables -A INPUT -p tcp -m multiport --dports 80,443 -m state --state ESTABLISHED, RELATED -j ACCEPT</p>
            </li>

            <li><b>Permite el trafico TCP entrante por eth0 a 22,80 y 433, registrar intentos y permitir solo NEW y ESTABLISHED</b>
              <p>iptables -A INPUT -p tcp -i eth0 -m multiport --dports 80,22,443 -m state --state NEW, ESTABLISHED -j ACCEPT</p>
            </li>
          </ol>
          <br><br>
          <h5 class="t_tareas" id="c3_t3p1">Conclusión</h5>
          <br>
          <p style="text-align: justify;">
            El recorrido por los fundamentos de iptables nos confirma su papel como una herramienta 
            indispensable y poderosa para la seguridad perimetral en entornos Linux.
            Concluimos y comprobamos que con una sola línea de comando puede implementar políticas de seguridad complejas, 
            como permitir tráfico nuevo y establecido a servicios críticos 
          </p>
          <br><br>
          <h5 class="t_tareas" id="c4_t1p1">Descargar actividad</h5>
          <br>
          <button id="btn_descarga" type="button" class="btn btn-primary btn-lg" style="width: 25%;">Descargar</button>
    </section>

    <br><br>
<!--Inicio del pie de pagina-->
          <footer>
            <div class="logos"><h4>Brian Salvador Espinoza Aguilar</h4>
            <img src="img/Github_dark.svg" width="30rem" height="20rem">
            </div>
            <hr width="50%" style="margin-left: 25%">
            <h5 style="text-align: center;">Universidad Politécnica de San Luis Potosí</h5>
          </footer>

          <!--Descargar el ddocumento con el boton-->
<script>
  document.getElementById('btn_descarga').addEventListener('click', function() {
    const link = document.createElement('a');
    link.href = 'tareas/parcial1/175031_act3.pdf'; 
    link.download = 'act01.pdf';
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
  });
</script>
     <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
</body>
</html>